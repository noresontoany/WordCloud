
<style>
#chartdiv {
  width: 100%;
  height: 500px;
}
</style>

<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
<script src="https://cdn.amcharts.com/lib/5/wc.js"></script>
<script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

<script>
am5.ready(function() {

var root = am5.Root.new("chartdiv");

root.setThemes([
  am5themes_Animated.new(root)
]);


var series = root.container.children.push(am5wc.WordCloud.new(root, {
  maxCount: 100,
  minWordLength: 2,
  minFontSize: am5.percent(6),
  maxFontSize: am5.percent(8),
  angles: [0]
}));

var colorSet = am5.ColorSet.new(root, { step: 1 });

series.labels.template.setAll({
  paddingTop: 5,
  paddingBottom: 5,
  paddingLeft: 5,
  paddingRight: 5,
  fontFamily: "Courier New"
});

series.labels.template.setup = function(label) {
  label.set("background", am5.RoundedRectangle.new(root, { fillOpacity: 1, fill: colorSet.next() }))
}

async function fetchData() {
                        const response = await fetch('/chart-data');
                        const data = await response.json();
                        console.log('Data fetched:', data);
                        series.data.pushAll(data);

                };
    fetchData();
    setInterval(fetchData, 5000);

}); // end am5.ready()

</script>


<div id="chartdiv" style="position: relative; width: 100%; height: 100%;">
</div>