<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" http-equiv="refresh" content="1">

  <title>Word Cloud</title>


  <link rel="stylesheet" href="styles.css">
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  <script src="static/jquery.awesomeCloud-0.2.js"></script>
    <script>
        async function postMessage() {
            const message = document.getElementById("message").value;

            const response = await fetch('/p', {
                method: 'POST',
                body: new URLSearchParams({'message': message})
            });
            const data = await response.json();
            document.getElementById("messages").innerHTML = data.join('<br>');
        }

        async function fetchMessages() {
            const response = await fetch('/messages');
            const data = await response.json();
            document.getElementById("messages").innerHTML = data.messages.join('<br>');
        }

        // Fetch messages every 2 seconds
        setInterval(fetchMessages, 2000);

        // Initial fetch
        window.onload = fetchMessages;
    </script>

</head>
<body>
	{% for word in words %}
        <span data-weight="{{ word.weight }}">{{ word.word }}  {{word.weight}}</span>
    {% endfor %}
    testasdasdasdasd

</body>
</html>
